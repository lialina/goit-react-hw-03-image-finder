{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","App.module.css","components/ImageGallery/ImageGallery.module.css","components/Container/Container.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Container/Container.js","components/SearchError/SearchError.js","components/Modal/Modal.js","components/Button/Button.js","services/images-api.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","query","queryInputId","shortid","generate","handleChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","reset","toast","error","className","s","SearchForm","this","type","SearchForm_button","SearchForm_button__label","SearchForm_input","autoComplete","autoFocus","placeholder","name","onChange","id","Component","ImageGalleryItem","webformatURL","onImageClick","onClick","src","alt","ImageGalleryItem_image","ImageGallery","images","map","Container","children","SearchError","message","role","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","Button","fetchImages","updatedQuery","page","a","fetch","then","response","ok","json","Promise","reject","Error","App","status","loader","showModal","currentModalImage","handleFormSubmit","console","log","toggleModal","modalImageUrl","find","image","largeImageURL","loadMoreImages","prevState","scroll","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","resData","hits","catch","finally","length","color","height","width","timeout","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9d0a9082.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__e1vXr\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__1N4U5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__QLWv7\",\"Modal\":\"Modal_Modal__1qgVN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__airb6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1-dGX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__1KKd7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__W6O52\"};","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport shortid from 'shortid';\nimport s from 'components/Searchbar/Searchbar.module.css';\n// import { ImSearch } from 'react-icons/im';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  queryInputId = shortid.generate();\n\n  handleChange = event => {\n    this.setState({\n      query: event.currentTarget.value.toLowerCase(),\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.query.trim() === '') {\n      toast.error('Please, enter your query');\n      return;\n    }\n\n    this.props.onSubmit(this.state.query);\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({\n      query: '',\n    });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchForm_button}>\n            <span className={s.SearchForm_button__label}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchForm_input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            name=\"query\"\n            value={this.state.query}\n            onChange={this.handleChange}\n            id={this.queryInputId}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import s from 'components/ImageGalleryItem/ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem({ id, webformatURL, onImageClick }) {\n  return (\n    <li className={s.ImageGalleryItem} onClick={() => onImageClick(id)}>\n      <img src={webformatURL} alt=\"\" className={s.ImageGalleryItem_image} />\n    </li>\n  );\n}\n\nexport default ImageGalleryItem;\n","import s from 'components/ImageGallery/ImageGallery.module.css';\nimport ImageGalleryItem from 'components/ImageGalleryItem/ImageGalleryItem';\n\nfunction ImageGallery({ images, onImageClick }) {\n  return (\n    <ul className={s.ImageGallery}>\n      {images.map(({ id, webformatURL }) => (\n        <ImageGalleryItem\n          onImageClick={onImageClick}\n          key={id}\n          id={id}\n          webformatURL={webformatURL}\n        />\n      ))}\n    </ul>\n  );\n}\n\nexport default ImageGallery;\n","import s from './Container.module.css';\n\nfunction Container({ children }) {\n  return <div className={s.Container}>{children}</div>;\n}\n\nexport default Container;\n","function SearchError({ message }) {\n  return (\n    <div role=\"alert\">\n      <p>{message}</p>\n    </div>\n  );\n}\n\nexport default SearchError;\n","import { Component } from 'react';\nimport s from 'components/Modal/Modal.module.css';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import s from 'components/Button/Button.module.css';\n\nfunction Button({ onClick }) {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nexport default Button;\n","const URL = 'https://pixabay.com/api/';\nconst API_KEY = '22041445-5ed2f4f2b816c2335628bcb5d';\n\nexport const fetchImages = async function (updatedQuery, page) {\n  return fetch(\n    `${URL}?q=${updatedQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(new Error(`No images on request ${updatedQuery}`));\n  });\n};\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport s from 'App.module.css';\nimport Searchbar from 'components/Searchbar/Searchbar';\nimport ImageGallery from 'components/ImageGallery/ImageGallery';\nimport Container from 'components/Container/Container';\n\nimport SearchError from 'components/SearchError/SearchError';\nimport Modal from 'components/Modal/Modal';\nimport Button from 'components/Button/Button';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\nimport { fetchImages } from 'services/images-api';\n\nclass App extends Component {\n  state = {\n    query: '',\n    images: [],\n    page: 1,\n    status: 'idle',\n    loader: false,\n    error: null,\n    showModal: false,\n    currentModalImage: null,\n  };\n\n  handleFormSubmit = query => {\n    console.log(query);\n    this.setState({ query, page: 1, images: [] });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { query, page } = this.state;\n\n    if (prevState.query !== query || prevState.page !== page) {\n      console.log('Изменился query или Добавилась страница');\n\n      this.setState({ loader: true });\n\n      fetchImages(query, page)\n        .then(resData => resData.hits)\n        .then(hits => {\n          this.setState({\n              status: 'resolved',\n              loader: false\n          });\n          \n          if (prevState.page < page) {\n            this.setState({ images: [...prevState.images, ...hits] });\n          } else {\n            this.setState({ images: hits });\n          }\n        })\n        .catch(error => this.setState({ error, status: 'rejected' }))\n        .finally(() => {\n          if (this.state.images.length > 12) {\n            this.scroll();\n          }\n        });\n    }\n  }\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  onImageClick = id => {\n    const modalImage = this.state.images.find(image => image.id === id);\n    const modalImageUrl = modalImage.largeImageURL;\n    this.setState({\n      currentModalImage: modalImageUrl,\n    });\n    this.toggleModal();\n  };\n\n  loadMoreImages = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n      loader: true,\n    }));\n  };\n\n  scroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  render() {\n    const { images, showModal, error, status, currentModalImage, loader } =\n      this.state;\n\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <Container>\n          {status === 'idle' && <div>Enter your request</div>}\n\n          {status === 'rejected' && <SearchError message={error.message} />}\n\n          {status === 'resolved' && (\n            <ImageGallery images={images} onImageClick={this.onImageClick} />\n          )}\n\n          {loader && (\n            <Loader\n              type=\"TailSpin\"\n              color=\"#00BFFF\"\n              height={80}\n              width={80}\n              timeout={3000}\n            />\n          )}\n\n          {images.length !== 0 && <Button onClick={this.loadMoreImages} />}\n\n          {showModal && (\n            <Modal onClose={this.toggleModal}>\n              <img src={currentModalImage} alt=\"\" />\n            </Modal>\n          )}\n\n          <ToastContainer autoClose={3000} />\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__7j0to\",\"SearchForm\":\"Searchbar_SearchForm__1KLpo\",\"SearchForm_button\":\"Searchbar_SearchForm_button__19wI7\",\"SearchForm_button__label\":\"Searchbar_SearchForm_button__label__3EU1f\",\"SearchForm_input\":\"Searchbar_SearchForm_input__2DGzJ\"};"],"sourceRoot":""}