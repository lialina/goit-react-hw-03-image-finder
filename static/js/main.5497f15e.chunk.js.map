{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","App.module.css","components/Container/Container.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","services/images-api.js","components/Searchbar/Searchbar.js","components/Container/Container.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/SearchError/SearchError.js","components/Modal/Modal.js","components/Button/Button.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","fetchImages","updatedQuery","page","a","fetch","then","response","ok","json","Promise","reject","Error","Searchbar","state","query","queryInputId","shortid","generate","handleChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","reset","toast","error","className","s","SearchForm","this","type","SearchForm_button","SearchForm_button__label","SearchForm_input","autoComplete","autoFocus","placeholder","name","onChange","id","Component","Container","children","ImageGalleryItem","webformatURL","onImageClick","onClick","src","alt","ImageGalleryItem_image","ImageGallery","images","map","SearchError","message","role","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","Button","App","status","loader","showModal","currentModalImage","handleFormSubmit","toggleModal","modalImageUrl","find","image","largeImageURL","loadMoreImages","prevState","scroll","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","resData","hits","length","catch","finally","color","height","width","timeout","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5497f15e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__e1vXr\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__1N4U5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__QLWv7\",\"Modal\":\"Modal_Modal__1qgVN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__airb6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__1KKd7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1-dGX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__W6O52\"};","const URL = 'https://pixabay.com/api/';\nconst API_KEY = '22041445-5ed2f4f2b816c2335628bcb5d';\n\nexport const fetchImages = async function (updatedQuery, page) {\n  return fetch(\n    `${URL}?q=${updatedQuery}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(new Error('Possibly server error, please try again.'));\n  });\n};\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport shortid from 'shortid';\nimport s from 'components/Searchbar/Searchbar.module.css';\n// import { ImSearch } from 'react-icons/im';\n\nclass Searchbar extends Component {\n  state = {\n    query: '',\n  };\n\n  queryInputId = shortid.generate();\n\n  handleChange = event => {\n    this.setState({\n      query: event.currentTarget.value.toLowerCase(),\n    });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.query.trim() === '') {\n      toast.error('Please, enter your query');\n      return;\n    }\n\n    this.props.onSubmit(this.state.query);\n    this.reset();\n  };\n\n  reset = () => {\n    this.setState({\n      query: '',\n    });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchForm_button}>\n            <span className={s.SearchForm_button__label}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchForm_input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            name=\"query\"\n            value={this.state.query}\n            onChange={this.handleChange}\n            id={this.queryInputId}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import PropTypes from 'prop-types';\nimport s from './Container.module.css';\n\nfunction Container({ children }) {\n  return <div className={s.Container}>{children}</div>;\n}\n\nContainer.propTypes = {\n  children: PropTypes.array.isRequired,\n};\n\nexport default Container;\n","import PropTypes from 'prop-types';\nimport s from 'components/ImageGalleryItem/ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem({ id, webformatURL, onImageClick }) {\n  return (\n    <li className={s.ImageGalleryItem} onClick={() => onImageClick(id)}>\n      <img src={webformatURL} alt=\"\" className={s.ImageGalleryItem_image} />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  id: PropTypes.number,\n  webformatURL: PropTypes.string,\n  onImageClick: PropTypes.func,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\nimport s from 'components/ImageGallery/ImageGallery.module.css';\nimport ImageGalleryItem from 'components/ImageGalleryItem/ImageGalleryItem';\n\nfunction ImageGallery({ images, onImageClick }) {\n  return (\n    <ul className={s.ImageGallery}>\n      {images.map(({ id, webformatURL }) => (\n        <ImageGalleryItem\n          onImageClick={onImageClick}\n          key={id}\n          id={id}\n          webformatURL={webformatURL}\n        />\n      ))}\n    </ul>\n  );\n}\n\nImageGallery.propTypes = {\n  images: PropTypes.array,\n  onImageClick: PropTypes.func,\n};\n\nexport default ImageGallery;\n","import PropTypes from 'prop-types';\n\nfunction SearchError({ message }) {\n  return (\n    <div role=\"alert\">\n      <p>{message}</p>\n    </div>\n  );\n}\n\nSearchError.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n\nexport default SearchError;\n","import { Component } from 'react';\nimport s from 'components/Modal/Modal.module.css';\nimport { createPortal } from 'react-dom';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import PropTypes from 'prop-types';\nimport s from 'components/Button/Button.module.css';\n\nfunction Button({ onClick }) {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport { toast } from 'react-toastify';\nimport s from 'App.module.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\nimport { fetchImages } from 'services/images-api';\n\nimport Searchbar from 'components/Searchbar/Searchbar';\nimport Container from 'components/Container/Container';\nimport ImageGallery from 'components/ImageGallery/ImageGallery';\nimport SearchError from 'components/SearchError/SearchError';\nimport Modal from 'components/Modal/Modal';\nimport Button from 'components/Button/Button';\n\nclass App extends Component {\n  state = {\n    query: '',\n    images: [],\n    page: 1,\n    status: 'idle',\n    loader: false,\n    error: null,\n    showModal: false,\n    currentModalImage: null,\n  };\n\n  handleFormSubmit = query => {\n    this.setState({ query, page: 1, images: [] });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { query, page } = this.state;\n\n    if (prevState.query !== query || prevState.page !== page) {\n      this.setState({ loader: true });\n\n      fetchImages(query, page)\n        .then(resData => resData.hits)\n        .then(hits => {\n          if (hits.length === 0) {\n            toast.error(`There are no images on ${query} request, please try another one.`);\n            return;\n          };\n          \n          this.setState({\n            status: 'resolved',\n            loader: false,\n          });\n\n          if (prevState.page < page) {\n            this.setState({ images: [...prevState.images, ...hits] });\n          } else {\n            this.setState({ images: hits });\n          }\n        })\n        .catch(error => this.setState({ error, status: 'rejected' }))\n        .finally(() => {\n          if (this.state.images.length > 12) {\n            this.scroll();\n          }\n        });\n    }\n  }\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  onImageClick = id => {\n    const modalImage = this.state.images.find(image => image.id === id);\n    const modalImageUrl = modalImage.largeImageURL;\n    this.setState({\n      currentModalImage: modalImageUrl,\n    });\n    this.toggleModal();\n  };\n\n  loadMoreImages = () => {\n    this.setState(prevState => ({\n      page: prevState.page + 1,\n      loader: true,\n    }));\n  };\n\n  scroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  render() {\n    const { images, showModal, error, status, currentModalImage, loader } =\n      this.state;\n\n    return (\n      <div className={s.App}>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <Container>\n          {status === 'idle' && <div>Enter your request</div>}\n\n          {status === 'rejected' && <SearchError message={error.message} />}\n\n          {status === 'resolved' && (\n            <ImageGallery images={images} onImageClick={this.onImageClick} />\n          )}\n\n          {loader && (\n            <Loader\n              type=\"TailSpin\"\n              color=\"#00BFFF\"\n              height={80}\n              width={80}\n              timeout={3000}\n            />\n          )}\n\n          {images.length !== 0 && <Button onClick={this.loadMoreImages} />}\n\n          {showModal && (\n            <Modal onClose={this.toggleModal}>\n              <img src={currentModalImage} alt=\"\" />\n            </Modal>\n          )}\n\n          <ToastContainer autoClose={5000} />\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__7j0to\",\"SearchForm\":\"Searchbar_SearchForm__1KLpo\",\"SearchForm_button\":\"Searchbar_SearchForm_button__19wI7\",\"SearchForm_button__label\":\"Searchbar_SearchForm_button__label__3EU1f\",\"SearchForm_input\":\"Searchbar_SearchForm_input__2DGzJ\"};"],"sourceRoot":""}